<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="../css/nav_bar.css" rel="stylesheet" type="text/css">
<link href="../css/login.css" rel="stylesheet" type="text/css">
<link href="../views/css/login.css" rel="stylesheet" type="text/css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<title>CSC648-02-fa22-team04</title>
</head>
<body>
<% var category; %> 
<% var searchVal; %>
<header>
  <div class="heading">
      <label class="logo">JobHunter</label>
      <nav>
          <ul>
              <li><a href="./">Home</a></li>
              <li><a href="./login">Login</a></li>
              <li><a href="./register">register</a></li>
              <li><a href="./about">About</a></li>
              <li><a href="./post">Post</a></li>
              <li><a href="#">Contact us</a></li>
          </ul>
      </nav>
  </div>
</header>

<!-- Dont touch this part -->
<div class="search-container">
  <form>
    <input class="form_input" id="search" type="text" value="<%= searchVal %> " name="search" placeholder="Search..">
    <div class="custom-select" style="width:200px;">
      <select name="category" onchange="this.form(submit)">
        <option value="">All Categories</option>
        <option value="AI" <% if (category == "AI") { %> selected <% } %> >AI</option>
        <option value="Software Dev" <% if (category == "Software Dev") { %> selected <% } %> >Software Dev</option>
        <option value="Web Dev" <% if (category == "Web Dev") { %> selected <% } %> >Web Dev</option>
        <option value="UX Designer" <% if (category == "UX Designer") { %> selected <% } %> >UX Designer</option>
        <option value="Mobile App" <% if (category == "Mobile App") { %> selected <% } %> >Mobile App</option>
        <option value="IT" <% if (category == "IT") { %> selected <% } %> >IT</option>
        <option value="Security" <% if (category == "Security") { %> selected <% } %> >Security</option>
        <option value="System Architect" <% if (category == "System Architect") { %> selected <% } %> >System Architect</option>
        <option value="Video Game Dev" <% if (category == "Video Game Dev") { %> selected <% } %> >Video Game Dev</option>
      </select>
    </div>
    <button class="form_button" type="submit">Submit</button>
  </form>
</div>

<script>
  $( document ).ready(function() {
    <% for (var i = 0; i < searchResult.length; i++) { %>
      var newDiv = document.createElement("div");
      newDiv.className = "content"
      var btn = document.createElement("button");
      btn.className = "collapsible"
      btn.innerHTML = " <%= searchResult[i]['ID'] %>. <%= searchResult[i]['Name'] %> ";
      var tag = document.createElement("p");
      var text = document.createTextNode("<%= searchResult[i]['description'] %>");
      tag.appendChild(text);
      var element = document.getElementById("result");
      element.appendChild(btn)
      element.appendChild(newDiv)
      newDiv.appendChild(tag)

      var coll = document.getElementsByClassName("collapsible");
      var i;

      for (i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function() {
          this.classList.toggle("active");
          var content = this.nextElementSibling;
          if (content.style.maxHeight){
            content.style.maxHeight = null;
          } else {
            content.style.maxHeight = content.scrollHeight + "px";
          } 
        });
      }
   <% }  %> 
  });
</script>

    
    
<!-- Results will be shown here add class tag to this div-->

<div class="result" id="result" >

</div>

</body>
</html>